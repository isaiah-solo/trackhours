language: go
go:
- 1.12
env:
  global:
  - secure: ItX1binWZ0k97W45aE3mjQl64tT7kawnSJMmy3BKqaaoSGOnTjPluNYpYq0OTQODTicZ2/Y4xhTbcPAq6IS6Y+tYYtP9SuCDbF8rK4xGDFmgDQIl3N55Nkc5lKkAUrgdXqgQC9qJcjqSd4BSncN9upyBk+Vy4hJZ6HgQqIvXq2hvYhnBkgkat66YxueCnsqb9Sw81NjPjy6RcDKGb+XIj1ixA5JW9OyonVyuSYPEJ1zTsmNKFu8XPHlX11BOckROMmgv6NXx6D+kkU576Bp6+OSQx984V8CdU5a6HzqkQLNghK4Md4piZRnIgWIdPMnyv1Wqmk0JZVjQBMxPg+d5gJdfSYWze5f+BfhD9bjBhFPuDqP522pFMdTtziUFJ6LYlvvTRCa7UBob4FFJhE/ZgL4dddYHFIgF9qXig77xi6kmDBjv31xhTXQbmUm0PQ8aJTgK2goW/tUwp7jMT0xvJS20taC8G/gfcKOnjITWpx4Mymu77IuAhlyllxEZf6ndv1FxNVB0u9KqR5A/aOnAZXqw/uNZs4vrN5HPRTDmxNf4vcwGaUGRGnC/4+p6HIeOZfGHena4w7VR9A0Q9xeL9PZ0Z8sbhDoqKiNPU9qOzc5rjqD4NbOpchdtMwQgbCqtt73VaR+7VV+RlCbce8QsO+mjVrNdCHiix9cokMdl7Gs=
  - secure: d9dqeGLI41szVbkXPEq68vXH7YyjuRkousS9MKf2EnwxiT4daH99PnkoJAoL9ngTlere2u+NU9HyhZE4e+lzwh2lmaFqVVxXzWcyYrcYGOpXNLSUT56E1ArPw25qxrQEp3XsP923vS6ezoX6ZRZOOUHQnWtZJ1l0QqQxQMxlLQp+mRn9X80KK/GIGPbMEseOec0WNPYTl7O0bXVbaJLgKbiHnSCGPfT7sh6gmqLIE2du4SZJ0BCDZ5hmsSoXkU8F84egHG9hGic335yGP9u1xa8M1M71qnSiZTW7Bkql28mz53Z93UjJyz0Qnun+6pA1Ne7t/OJtERtXO6DGLputgcVdR4Zq2OGk7XkTLzOVQP15IB8MIruaTYlz1uB0sH9ZzanEzuR35maxP4o5Zec5c8AVxyDkmHHlhFsciIKfi+qecLW6KsMpcIXQoyRes3gM5+c64QZBiSjq8NLrXjjB02tx7vV3A9HAr75pjDzJz1TuuvgNTfmocqJbgzBc8Y4y3IV7JiwzsptDj56sOW/j+tvhshcfij2g6mn4cC6meSaHcd4EkoXzfc88T9+/sm9PbFCwMqVKCAEMQYkLxQqVwZhE2YsKA0cXCTB/nclsdv9N2CeRzjzMFmSV1HTgIzhW1xVm+Svvlcbn5WU2dvDWbyQAaPTDHN4oOond1d/CJb8=
  - secure: dLSFPduQX07IDF5x50GWinO/t/TPJ8bqHQcUZAOuTPAdymjdJZ3wc84EPjGNGtZNaSdr2hMvoH7Z0S5a3TpPyk5cVveH4svAJoP/q4rjfB0npw3mVHaf/LabgNrf7U0OcxjMhZbxfHP/tyrJPkZzeYEH7zuLIpplpC0GBJy0suAzu7/TSsvmXs6G+et1geq9hyQd8k/rN9zcBUHoGcBJwvsNLaFe3FXIAXAdZqCTljp/u1H7pRPNAKbgFI4mAFfyZhQ/1yPVVJLzxWHz8+9KaWf5LfLP5AAXChkkTJseNx3U/lWA3Vf4fFo9pvY26tJf9KiYSawtz+ObZFWQ/Z31xRD9e66xgAWZRCxpO3y+R6zdvW+uBnkqJl8arbXqn6kHUDYAqPSoxv1gK/kkVBQ5xY27PVu0MrgU2kuVWC7o9EOG6S/y8h/krjDahDXuXpAhK/9PuiqTTv03R1SQ4zdbatJjhrYQW5F7+3TNrljQAGR8YDf8ynCK3Tu7Pb2yp3YZvc3rtuoBIKVaCWwLT4Izo/gGYsOjphLdqlcvqP1LbB6BKovU92E6j21mpWELLO/dxoJHFdof5NuXpdelLFxoZaJhXSNhsTPRgGb4N30jzdNOQzcbDFll6jFyjsr9Fy2tr+R6B8r1gjyA9ndeiOQfRzBoOwgexh6W62Rsy0THV/I=
  - secure: pHqFpJm0POsReRSBqe0A9oHwKQEfDxT/q5MbOGY2UO4DpM6lRoxk88nzDLZySqvnraqPIhTJbDBHeYLogsvt6BZ/VbOIopNZy4J6rODos3HPYkLCs2xuInWTLh7rDDisrUFWOFQFFPh909QkL4av61BdEaDsk/iP5JisS2ht3Njc3OMhDzUe+zH9lys4+4MrxHvx/kRnIpUnonhuchVditWTqDCQ6IERtw9rwrZJHP8bqAsMrAOs2RvlzsyQqQejne7m7hzpCijuuQ//zp0WN04weUzI6eXnOnbqqT60mCHD3//xRt5TYAtx3/WblvOc/u1khlZy8OBTWb6U1Rapwf+5exDQ2aJsSxDXbQXrrIVW8lpcE5rCJuvI1l1VN9UBCwokkR5IE+jLIQEh49lIfKJXXG1j39qPxCx/gVKLv641v21eCUA0wx7ZrOZtUwhTdmdjBv+MXuHT7JxZETJj/i2EkXWdcRRDRx12tJg89JFjxu7uM2nxUv7I4+l3rR0UP6l2jvfaw11LohotBJN7HJl+j9efN32nT5GmxglQ6vBLwUKxxGnA24il4jO2jUCeWd1jtbuAUpCQaaRfYDh3XKAsc64TbZsKekUzXOZ1nyW9XgSwzTFpiCShQBeX98fUqShkjf1YpSD9a6XdXrGZedGkda2NgJyegGGT0QxoIGY=
script: 
after_success:
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=isaiahsolo/trackhours
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH
  ; fi`
- docker build -f server/Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
