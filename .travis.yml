language: go
go:
- 1.12
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: AIsn4RuBufqwrM2NKph/pBHmNtkP1h7ATD4j9N0YidMFzus4dD0JnpabEfc4M/EvIfFd/FObGBZcaF/TEPRjrpUgmMHtLDD3R990+1ZColItIwWgcForRV4DcLbWn03ARaycr8aesNBM9vZVfbF0+CSYPi+fozH0RWZEktXNkSOicQ0HDHv+YG/Q7ShMTImKvgX3OoRw3M8d3oaJhoTIx0N/g0v9cZnU83aCo3D1lAUi5XSMJpI9IAxZwC7H5vA7PLp1+cAe2euguX8FpzwvgXCSNFvNUVMnnzxst7waITGbi6vSwOxq69od35qh8oSjo3EXOkjLscRPyZKCfN6yVy3uYNwkwuXgUme0Vr82SRbuH0BdYrvArsyP4N8iHk6gDhXgYrq64ZwfzkNOTf2AePWm08kBlESIwv1x78sQaGwd7Cfn15hHg3aJuvazI5/nFlFD7ITkgvNibMt+Ca8p4TzM+zSdXv8zAcOErPC/yVBiokI7Pq7qH1vWH6qgnpgQO3Z/C3/RdvZHJldRDAxKe85vmbXr+gF/69TMAQjCqEr97FRA+Q3tEept0D3kNoFlEfy/2YG3rS2k1RatJrlRZH2rWgXp9leCLIGQyRtpjt1EvN/ANiLmAs6ZjcNnfiqkqZ6j0R+SbZ67BHoESYJ2LfWKQt2jPK0ZeyfKroxS/lU=
script: 
after_success:
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=isaiahsolo/trackhours
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH
  ; fi`
- docker build -f server/Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
